"""未来热力图预测，采用神经网络的方法。"""import numpy as npimport pandas as pdimport mathimport osimport warningsimport mathimport matplotlib.pyplot as pltos.chdir('..')from Behaviour.db_tools import *import timewarnings.filterwarnings('ignore')def Region():    Adamin_Region = {        1: ["ws0kz", "ws0m6", "ws0my", "ws0t9", "ws0tg", "ws0mw", "ws0sc", "ws0kt", "ws0sf", "ws0te", "ws0mk",            "ws0ts", "ws0m5", "ws0mp", "ws0mm", "ws0w4", "ws0m4", "ws0kq", "ws0t1", "ws0m7", "ws0t2", "ws0mt",            "ws0w1", "ws0tf", "ws0tv", "ws0mq", "ws0t3", "ws0tt", "ws0mj", "ws0tc", "ws0kg", "ws0mr", "ws0w3",            "ws0mz", "ws0mv", "ws0sb", "ws0km", "ws0t8", "ws0ku", "ws0tb", "ws0td", "ws0w6", "ws0mx", "ws0t6",            "ws0kw", "ws0mh", "ws0kf", "ws0t4", "ws0kv", "ws0tu", "ws0t0", "ws0ky", "ws0mn"],        2: ["ws0c8", "ws0b2", "ws0c0", "ws0c1", "ws09q", "ws09e", "ws0cb", "ws08z", "ws0b6", "ws0c7", "ws0d5",            "ws0c5", "ws0c6", "ws0b9", "ws0bf", "ws0b3", "ws0c3", "ws0dj", "ws09y", "ws09z", "ws09p", "ws0dh",            "ws09w", "ws0b8", "ws09n", "ws0dm", "ws0bd", "ws09x", "ws0c4", "ws09u", "ws0bc", "ws0bb", "ws0c9",            "ws09t", "ws0b7", "ws0d7", "ws08y", "ws0cc", "ws09g", "ws0dk", "ws09s", "ws09v", "ws0be", "ws09r",            "ws0c2", "ws0bg"],        3: ["ws0vs", "ws0ut", "ws0vw", "ws0v0", "ws0vy", "ws0ur", "ws0ym", "ws0gg", "ws0gy", "ws1h3", "ws1jb",            "ws1hf", "ws0vr", "ws0v5", "ws0gb", "ws0yh", "ws0uk", "ws0vh", "ws1j3", "ws0uh", "ws0ud", "ws0uq",            "ws0vv", "ws0vk", "ws0us", "ws0yq", "ws1j2", "ws0vx", "ws1h8", "ws0g9", "ws0v2", "ws0g8", "ws0u9",            "ws0u5", "ws0uz", "ws0vz", "ws0v4", "ws0uj", "ws0u3", "ws0v6", "ws0uy", "ws0vu", "ws0un", "ws1j4",            "ws0yn", "ws1hc", "ws0v3", "ws0ux", "ws0u1", "ws0uv", "ws0g3", "ws1h9", "ws0vt", "ws1h6", "ws1j6",            "ws1j8", "ws0u6", "ws0g2", "ws1hd", "ws0u8", "ws0ug", "ws0u4", "ws0vm", "ws0v1", "ws1h2", "ws0gf",            "ws0gu", "ws0gv", "ws0vq", "ws0uw", "ws0uc", "ws1j1", "ws0vj", "ws0yk", "ws0vp", "ws0gc", "ws0vn",            "ws0uu", "ws1hb", "ws0u7", "ws0v7", "ws0u2", "ws0yj", "ws1j0", "ws0ub", "ws0ue", "ws0u0", "ws0um",            "ws0uf"],        4: ["ws1pc", "ws0ws", "ws0zp", "ws0z6", "ws0yu", "ws0wt", "ws1p0", "ws0zd", "ws0y7", "ws1pd", "ws300",            "ws0y4", "ws1p1", "ws0yv", "ws0zn", "ws0vd", "ws0zm", "ws1nb", "ws0wm", "ws0vf", "ws0y1", "ws0zu",            "ws0wk", "ws0y5", "ws0yw", "ws304", "ws1p3", "ws1p8", "ws0vc", "ws0yt", "ws0we", "ws0y3", "ws301",            "ws0y0", "ws1pb", "ws0w5", "ws1pf", "ws0wv", "ws0zt", "ws0ze", "ws0zy", "ws0v8", "ws0ty", "ws0zq",            "ws0ys", "ws2bj", "ws0wn", "ws0yf", "ws2bp", "ws0v9", "ws1p4", "ws0z5", "ws1p9", "ws2bh", "ws0zx",            "ws0wu", "ws0yy", "ws0vb", "ws0z7", "ws0y6", "ws0zs", "ws0tw", "ws0yz", "ws0yg", "ws0wp", "ws0zj",            "ws0zz", "ws0wj", "ws0zw", "ws0zh", "ws0vg", "ws1p6", "ws0yx", "ws1n8", "ws0wh", "ws0yd", "ws0tz",            "ws0wq", "ws1p2", "ws0zr", "ws0tx", "ws0y2", "ws0zv", "ws0ye", "ws0zk", "ws0w7", "ws0z4", "ws2bn",            "ws0wg", "ws0wr", "ws0ve"],        5: ["ws0d1", "ws0d9", "ws0dp", "ws0d6", "ws0dr", "ws0d4", "ws0dd", "ws0dc", "ws0dv", "ws0dn", "ws0d3",            "ws0dx", "ws0dw", "ws0de", "ws0en", "ws0ej", "ws0ds", "ws0dg", "ws0e4", "ws0eh", "ws0dt", "ws0du",            "ws0dq", "ws0e1", "ws0dz", "ws0dy", "ws0df", "ws0e5", "ws0ep"],        6: ["ws0sm", "ws0kx", "ws0s6", "ws0ef", "ws0s0", "ws0sk", "ws0tj", "ws0t5", "ws0sr", "ws0sd", "ws0s7",            "ws0kp", "ws0sg", "ws0eb", "ws0tm", "ws0se", "ws0s2", "ws0th", "ws0s1", "ws0st", "ws07z", "ws0sx",            "ws0s8", "ws0ec", "ws0ss", "ws0sq", "ws0sw", "ws0su", "ws0tk", "ws0sv", "ws0t7", "ws0s3", "ws0s4",            "ws0s9", "ws0kr"],        7: ["ws0tp", "ws0ey", "ws0tn", "ws0ex", "ws0tq", "ws0sy", "ws0er", "ws0eq", "ws0ew", "ws0tr", "ws0sp",            "ws0ez", "ws0sn", "ws0sz"],        8: ["ws0e8", "ws0e2"],        9: ["ws0ee", "ws0em", "ws0et", "ws0e9", "ws0e7", "ws0ed", "ws0es", "ws0ek", "ws0e6", "ws0e3"],        10: ["ws0eu", "ws0sh", "ws0s5", "ws0ev", "ws0sj", "ws0eg"],        11: ["ws07r", "ws07x"]    }    return Adamin_Regiondef loaddata(area,date_):    # Adamin_Region = Region()    # day = ['2017-02-01 00:00:00','2017-02-12 00:00:00']    # for j in range(len(day)):    #     for i in range(1,len(Adamin_Region)):    #         lst = get_hot_info(day[j][0:10], Adamin_Region[i])    date = date_[0:10] + ' ' +'00:00:00'    Adamin_Region = Region()    get_ = Adamin_Region[area]    train = [];test = []    # 模型中的数据    data1 = get_hot_info_1(get_)    # 同格式    for x in range(len(data1)):       # print(data1)        if data1[x][1][13:15] == date_[11:13]:            test.append(data1[x])        else:            train.append(data1[x])    a_test = get_hot_info_2(get_,date_)    test.append(a_test)    pre_size = len(a_test)    train_x = pd.DataFrame(train,dtype=float).iloc[:,2:-1]    train_y = pd.DataFrame(train,dtype=float).iloc[:,-1]    test_x = pd.DataFrame(test,dtype=float).iloc[:,2:-1]    test_y = pd.DataFrame(test,dtype=float).iloc[:,-1]    test_geo = np.array(pd.DataFrame(test).iloc[:,0]).tolist()[-pre_size:]    return np.mat(np.array(train_x).tolist()),np.mat(np.array(train_y).tolist()).T,np.mat(np.array(test_x).tolist()),np.mat(np.array(test_y).tolist()).T,pre_size,test_geodef distance(X, Y):    '''    计算两个样本之间的距离    '''    return np.sqrt(np.sum(np.square(X - Y), axis=1))# 得到测试样本和训练样本之间的关系矩阵def distance_mat(trainX, testX):    '''计算待测试样本与所有训练样本的欧式距离    input:trainX(mat):训练样本          testX(mat):测试样本    output:Euclidean_D(mat):测试样本与训练样本的距离矩阵    '''    m, n = np.shape(trainX)    p = np.shape(testX)[0]    Euclidean_D = np.mat(np.zeros((p, m)))    for i in range(p):        for j in range(m):            Euclidean_D[i, j] = distance(testX[i, :], trainX[j, :])[0, 0]    return Euclidean_D# Gauss函数取值def Gauss_(Euclidean_D, sigma):    '''测试样本与训练样本的距离矩阵对应的Gauss矩阵    input:Euclidean_D(mat):测试样本与训练样本的距离矩阵          sigma(float):Gauss函数的标准差    output:Gauss(mat):Gauss矩阵    '''    # m-标签的样本个数；n-训练集的样本个数    m, n = np.shape(Euclidean_D)    Gauss = np.mat(np.zeros((m, n)))    for i in range(m):        for j in range(n):            Gauss[i, j] = math.exp(- Euclidean_D[i, j] / (2 * (sigma ** 2)))    return Gaussdef sum_layer(Gauss, trY):    '''    求和层矩阵，列数等于输出向量维度+1,其中0列为每个测试样本Gauss数值之和    '''    m, l = np.shape(Gauss)    n = np.shape(trY)[1]    sum_mat = np.mat(np.zeros((m, n + 1)))    ## 对所有模式层神经元输出进行算术求z    for i in range(m):        sum_mat[i, 0] = np.sum(Gauss[i, :], axis=1)  ##sum_mat的第0列为每个测试样本Gauss数值之和    ## 对所有模式层神经元进行加权求和    for i in range(m):        for j in range(n):            total = 0.0            for s in range(l):                # 权值相加                total += Gauss[i, s] * trY[s, j]            sum_mat[i, j + 1] = total  ##sum_mat的后面的列为每个测试样本Gauss加权之和    return sum_matdef output_layer(sum_mat):    '''输出层输出    input:sum_mat(mat):求和层输出矩阵    output:output_mat(mat):输出层输出矩阵    '''    m, n = np.shape(sum_mat)    output_mat = np.mat(np.zeros((m, n - 1)))    for i in range(n - 1):        output_mat[:, i] = sum_mat[:, i + 1] / sum_mat[:, 0]    return output_matdef hot_main(json):    Adamin_Region = Region()    starttime = time.time()    train_x, train_y, test_x, test_y,pre_size,test_geo = loaddata(json['area'], json['futureTime'])    # 分别输入训练样本和测试样本    Euclidean_D = distance_mat(train_x, test_x)    # 根据效果可自选sigma    Gauss = Gauss_(Euclidean_D, 1.2)    ## 4.求和层输出（输入训练样本的目标）    sum_mat = sum_layer(Gauss, train_y)    ## 5.输出层输出    output_mat = output_layer(sum_mat)    result = []    for i in range(len(output_mat.tolist())):        if str(output_mat.tolist()[i][0]) == 'nan':            if str(np.array(test_y).tolist()[i][0]) == 'nan' :                result.append(0)            else:                result.append(np.array(test_y).tolist()[i][0])        else:            result.append(round(output_mat.tolist()[i][0]))    # 预测结果    pre_= result[-pre_size : ]    print("预测结果",pre_)    # 测试集    test_ = [i[0] for i in np.array(test_y).tolist()][-pre_size:]    print("真实结果",test_)    print("对应的geohash",test_geo)    # 将json中五级块相同的东西放在一起    geohash5 = {}    for one in json['heat']:        if one['geohash'][0:5] not in geohash5.keys():            geohash5[one['geohash'][0:5]] = []        geohash5[one['geohash'][0:5]].append([one['geohash'], one['count']])    # print(geohash5.keys(),type(geohash5.keys()))    #遍历每一个五级块，有做预测的就算出比例，没有的照旧    for one in list(geohash5.keys()):        # 如果有做预测，就显示比例        if one in test_geo:            # print("haha")            sum_ = sum([float(i[1]) for i in geohash5[one]])            for i in geohash5[one]:                # print(i[1])                i[1] = float(i[1]) / sum_                # print(i[1])                i[1] = pre_[test_geo.index(one)] * i[1]                # print(i[1])                # print("----")    # print(geohash5)    # 转化为json格式，利用geohash5矩阵：    hot = {}    hot['area'] = json['area']    hot['futureTime'] = json['futureTime']    hot['nowTime'] = json['futureTime']    hot['heat'] = []    for i in range(len(json['heat'])):        one = {}        one['longitude'] = None        one['latitude'] = None        one['time'] = None        one['geohash'] = json['heat'][i]['geohash']        # 按照对应的比例        for j in geohash5[one['geohash'][0:5]]:            if j[0] == one['geohash']:                one['count'] = math.ceil(j[1])        hot['heat'].append(one)    print("时间：",time.time()-starttime)    print(hot)    # print(geohash5)    early = []    pre_ = []    for one in range(len(json['heat'])):        early.append(json['heat'][one]['count'])        pre_.append(hot['heat'][one]['count'])    #print(early,pre_)    error_rate = 0.0    for one in range(len(early)):        if early[one] == 0:            pass        else:            error_rate += abs((early[one] - pre_[one]) / early[one])    print("误差为：" , (error_rate/len(early)))    return hotif __name__ == '__main__':    json = {'area': 6, 'heat': [{'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sc82', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s7qm', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s93n', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scxc', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2y0', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mpbm', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s37g', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s8bp', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0ssfx', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0whus', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t1e1', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s846', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s7rn', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s26w', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6pm', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t014', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2hb', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2gy', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sgr1', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4hz', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tkup', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mpcm', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s93z', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2gw', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sfpf', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4jr', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s738', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s733', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s71q', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4jp', 'count': 194}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sfpd', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6s6', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s71t', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3kk', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s730', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s732', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sc8b', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0semu', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s96x', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s96z', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t9ut', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sgd5', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0thc3', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4m2', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t037', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s96p', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s96r', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4m0', 'count': 16}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0skjq', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sunj', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s7tk', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9xm', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sf02', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4kb', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tj50', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t0sj', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t7py', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wmct', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t7rt', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mvsr', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t82u', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s97x', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6sp', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0skks', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6u0', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s97p', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6u1', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sbk4', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sckv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6sk', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6d3', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ty', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mw4n', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6tv', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6v8', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wnh6', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s648', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6v4', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6dc', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9zv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6dd', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t0ef', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t1wx', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s62g', 'count': 6}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t03r', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se08', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6e6', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sgde', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sf0q', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6tf', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4mb', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4mc', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6e4', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3my', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6e1', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9kp', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s63t', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s63p', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s63q', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ee', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6w7', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6w2', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t0fd', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sg3y', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mvdp', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s63k', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6du', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ug', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6dv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tjxx', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ub', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0kyr2', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0ses0', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wm5j', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t4q5', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ez', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0krcp', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s76k', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0surg', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ey', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6vc', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se0n', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6en', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9kr', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wk0k', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6g2', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6ep', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6vb', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3qy', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9mr', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3qw', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t407', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s65r', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3qq', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0q47r', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6y8', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0susn', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s792', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s65p', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s77k', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se39', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se36', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6h9', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sf55', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0thfe', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t6cp', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s30z', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mtv4', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t415', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t63u', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3rw', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t417', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sspv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se3b', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6z7', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tvu4', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sd1c', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t6w3', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3rq', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6z6', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se2x', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sspk', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se2u', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sbp6', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3c3', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9mx', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9mz', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3cm', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0krwy', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t40u', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s339', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mrqj', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0su54', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s31t', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s693', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0su51', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sdck', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0th89', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s31f', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t40e', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0th88', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s67j', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t40g', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6yf', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se3m', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6yc', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41y', 'count': 7}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0td0e', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41w', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scbx', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sfj8', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scbr', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41s', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scd6', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scbt', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41t', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41m', 'count': 10}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2rq', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scbp', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0kxck', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41e', 'count': 11}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0stcv', 'count': 4}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41g', 'count': 10}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6zm', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t41h', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se4x', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sd46', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tm1j', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3cv', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t3b0', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sdv1', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2cm', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sfjb', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9qp', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t3bc', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t445', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t66v', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t447', 'count': 12}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sccu', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0mu7e', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s21b', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sd54', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0suh9', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6jt', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sv7c', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3f5', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wjy0', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wk7m', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wjy1', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0wk7n', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scuj', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3fk', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sd5k', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3vv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s366', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0stff', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0kxg6', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s34v', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s2v4', 'count': 3}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0suxu', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se6y', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scde', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s7mu', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9qx', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0kzyz', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0w02e', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0se6s', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s9qz', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tmh8', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t44y', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scvm', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scer', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t44q', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sceq', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tkbg', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scen', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t44n', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scuz', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scej', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0whsv', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t44k', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0te4y', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sd5t', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t44e', 'count': 5}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scuw', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t7kt', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0scuq', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3ft', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s92p', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s36w', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t1s7', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t45q', 'count': 2}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s36r', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s36t', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0sfn9', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s36n', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0tkce', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0t45n', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s6mz', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s3gy', 'count': 1}, {'longitude': None, 'latitude': None, 'time': None, 'geohash': 'ws0s91y', 'count': 2}], 'futureTime': '2017-02-11 15:00:00', 'nowTime': '2017-02-01 15:00:00'}    hot = hot_main(json)    # print(len(json['heat']),len(hot['heat']))